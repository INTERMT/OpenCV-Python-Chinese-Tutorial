# OpenCV中的绘图功能

###### 作者|OpenCV-Python Tutorials
###### 编译|Vincent
###### 来源|OpenCV-Python Tutorials  

### 目标

- 学习使用OpenCV绘制不同的几何形状
- 您将学习以下功能：**cv.line()**，**cv.circle()**，**cv.rectangle()**，**cv.ellipse()**，**cv.putText**()等。

### 代码
在上述所有功能中，您将看到一些常见的参数，如下所示：

- img：您要绘制形状的图像
- color：形状的颜色。对于BGR，将其作为元组传递，例如：(255,0,0)对于蓝色。对于灰度，只需传递标量值即可。
- 厚度：线或圆等的粗细。如果对闭合图形（如圆）传递`-1` ，它将填充形状。*默认厚度= 1*
- lineType：线的类型，是否为8连接线，抗锯齿线等。*默认情况下*，为8连接线。**cv.LINE_AA**给出了抗锯齿的线条，看起来非常适合曲线。

#### 画线
要绘制一条线，您需要传递线的开始和结束坐标。我们将创建一个黑色图像，并从左上角到右下角在其上绘制一条蓝线。

```python
import numpy as np
import cv2 as cv
# 创建黑色的图像
img = np.zeros((512,512,3), np.uint8)
# 绘制一条厚度为5的蓝色对角线
cv.line(img,(0,0),(511,511),(255,0,0),5)
```

#### 画矩形

要绘制矩形，您需要矩形的左上角和右下角。这次，我们将在图像的右上角绘制一个绿色矩形。
`cv.rectangle(img,(384,0),(510,128),(0,255,0),3)`

#### 画圆圈
要绘制一个圆，需要其中心坐标和半径。我们将在上面绘制的矩形内绘制一个圆。
`cv.circle(img,(447,63), 63, (0,0,255), -1)`

#### 画椭圆
要绘制椭圆，我们需要传递几个参数。一个参数是中心位置（x，y）。下一个参数是轴长度（长轴长度，短轴长度）。angle是椭圆沿逆时针方向旋转的角度。startAngle和endAngle表示从主轴沿顺时针方向测量的椭圆弧的开始和结束。即给出0和360给出完整的椭圆。有关更多详细信息，请参阅**cv.ellipse**的文档。下面的示例在图像的中心绘制一个椭圆形。

`cv.ellipse(img,(256,256),(100,50),0,0,180,255,-1)`

#### 画多边形

要绘制多边形，首先需要顶点的坐标。将这些点组成形状为`ROWSx1x2`的数组，其中`ROWS`是顶点数，并且其类型应为int32。在这里，我们绘制了一个带有四个顶点的黄色小多边形。

```python
pts = np.array([[10,5],[20,30],[70,20],[50,10]], np.int32)
pts = pts.reshape((-1,1,2))
cv.polylines(img,[pts],True,(0,255,255))
```

> **注意**
  如果第三个参数为False，您将获得一条连接所有点的折线，而不是闭合形状。
  **cv.polylines**()可用于绘制多条线。只需创建要绘制的所有线条的列表，然后将其传递给函数即可。所有线条将单独绘制。与为每条线调用**cv.line**相比，绘制一组线是一种更好，更快的方法。

#### 向图像添加文本：

要将文本放入图像中，需要指定以下内容。
- 您要写入的文字数据
- 您要放置它的位置坐标（即数据开始的左下角）。
- 字体类型（检查**cv.putText**文档以获取受支持的字体）
- 字体比例（指定字体大小）
- 常规的内容，例如颜色，厚度，线条类型等。为了获得更好的外观，建议使用lineType = **cv.LINE_AA**。

我们将在白色图像上写入**OpenCV**。

```python
font = cv.FONT_HERSHEY_SIMPLEX
cv.putText(img,'OpenCV',(10,500), font, 4,(255,255,255),2,cv.LINE_AA)
```

#### 结果
现在是时候查看我们绘图的最终结果了。正如您在以前的文章中学习的那样，显示图像以查看它。

![](http://qiniu.aihubs.net/drawing_result.jpg)

### 其他资源

1. 椭圆函数中使用的角度不是我们的圆角。有关更多详细信息，请访问此讨论：http://answers.opencv.org/question/14541/angles-in-ellipse-function/。

### 练习题

1. 尝试使用OpenCV中可用的绘图功能创建OpenCV的徽标。